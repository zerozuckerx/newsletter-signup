name: CI
on:
  push:
    branches:
      -master

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
	- name: Checkout branch
	  uses: actions/checkout@v2

	- name: Use Node.js
        uses: actions/setup-node@v1

	- name: Install dependencies
	  run: npm install

	- name: Build & deploy
	  run: npm run deploy
	  env:
	    CI: true
          repoToken: '${{ secrets.GITHUB_TOKEN }}'
          firebaseServiceAccount: '${{ secrets.FIREBASE_SERVICE_ACCOUNT_NEWSLETTER_SIGNUP_700DB }}'
          projectId: newsletter-signup-700db
